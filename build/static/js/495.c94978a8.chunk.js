"use strict";(self.webpackChunkcoding_platform=self.webpackChunkcoding_platform||[]).push([[495],{495:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var s=r(9379),a=r(5043),l=r(184),c=r(3611),o=r(791),n=r(3216),d=r(5187),i=r(6040),m=r(579);const x=()=>{const[e,t]=(0,a.useState)(null),[r,x]=(0,a.useState)([]),[u,g]=(0,a.useState)({}),[h,b]=(0,a.useState)(0),[p,y]=(0,a.useState)(!0),[f,j]=(0,a.useState)(null),[k,N]=(0,a.useState)(null),{course:v}=(0,n.g)(),w=(0,n.Zp)(),{user:C}=(0,d.A)(),E=async()=>{if(!C)return{};try{const e=(0,c.KR)(o.OO),t=await(0,c.Jt)((0,c.jf)(e,"userprogress/".concat(C.uid,"/").concat(v)));return console.log("userprogress/".concat(C.uid,"/").concat(v)),console.log("Snapshot:",t.val()),t.exists()?t.val():{}}catch(f){return console.error("Error fetching user progress:",f),{}}},S=async()=>{try{const e=(0,c.KR)(o.OO),t=await(0,c.Jt)((0,c.jf)(e,"/AlgoCore/".concat(v,"/lessons")));if(!t.exists())return console.log("No data available"),[];const r=t.val(),s=[];await E();return console.log(r),Object.keys(r).forEach(e=>{var t;const a=r[e];if("object"!==typeof a||!a.description)return;const l=[];console.log(a),null===(t=a.questions)||void 0===t||t.forEach(e=>{console.log(e),l.push({name:e,status:"Not Started",difficulty:"Easy",question:e})}),s.push({title:e,description:a.description,problems:l,status:a.status})}),s}catch(f){throw console.error("Error fetching data from Firebase:",f),f}};if((0,a.useEffect)(()=>{!async function(){try{y(!0);const e=(0,c.KR)(o.OO),r=await(0,c.Jt)((0,c.jf)(e,"AlgoCore/".concat(v,"/course")));if(!r.exists())throw new Error("Failed to fetch course data");{const e=r.val();t(e)}const[a,l]=await Promise.all([S(),E()]),n=((e,t)=>t&&"object"===typeof t?e.map(e=>{const r=t[e.title]||{},a=e.problems.map(e=>{let t="Not Started";return e.name in r&&(t=!0===r[e.name]?"Completed":"Not Completed"),(0,s.A)((0,s.A)({},e),{},{status:t})});return(0,s.A)((0,s.A)({},e),{},{problems:a})}):e)(a,l);x(n);const d=(e=>{let t=0,r=0;return e.forEach(e=>{e.problems.forEach(e=>{t++,"Completed"===e.status&&r++})}),t>0?Math.round(r/t*100):0})(n);b(d)}catch(e){console.error("Error fetching data:",e),j(e.message),x(null)}finally{y(!1)}}()},[v,C]),p&&i.A,f)return(0,m.jsxs)("div",{className:"flex justify-center items-center min-h-screen",children:["Error: ",f]});if(!e)return null;const{title:A,description:O,stats:P}=e,J=r.reduce((e,t)=>e+t.problems.length,0),K=r.reduce((e,t)=>e+t.problems.filter(e=>"Completed"===e.status).length,0);return(0,m.jsx)("div",{className:"bg-gray-50 dark:bg-dark-primary text-gray-900 dark:text-gray-100 min-h-screen",children:(0,m.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,m.jsxs)("div",{className:"lg:col-span-2",children:[(0,m.jsxs)("div",{className:"flex items-center mb-4",children:[(0,m.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/50 p-3 rounded-lg mr-4",children:(0,m.jsx)(l.vd0,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),(0,m.jsx)("h1",{className:"text-4xl font-bold",children:A})]}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:O}),C&&(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Course Progress"}),(0,m.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:(0,m.jsx)("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-500 ease-in-out",style:{width:"".concat(h,"%")}})}),(0,m.jsxs)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:[h,"% Completed"]}),(0,m.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[K," Problems Completed"]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600 dark:text-gray-400 mb-6",children:[(0,m.jsxs)("span",{children:[J," Problems"]}),(0,m.jsx)("span",{children:P.level})]}),!C&&(0,m.jsx)("div",{className:"border-t border-b border-gray-200 dark:border-dark-tertiary py-4 mb-8",children:(0,m.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Please ",(0,m.jsx)("a",{href:"/login",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"login"})," to track your progress"]})}),(0,m.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Problems"}),(0,m.jsx)("div",{className:"space-y-4",children:r.map((e,t)=>(0,m.jsxs)("div",{className:"bg-white dark:bg-dark-tertiary rounded-lg shadow-sm border border-gray-200 dark:border-dark-tertiary",children:[(0,m.jsxs)("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>N(k===t?null:t),children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"bg-gray-100 dark:bg-dark-tertiary rounded-full w-10 h-10 flex items-center justify-center mr-4 font-bold text-lg",children:t+1}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"font-semibold text-lg",children:e.title.replace(/^[^a-zA-Z]*([a-zA-Z].*)$/,"$1")}),(0,m.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description})]})]}),(0,m.jsx)(l.Vr3,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(k===t?"rotate-180":"")})]}),k===t&&e.problems.length>0&&(0,m.jsx)("div",{className:"border-t border-gray-200 dark:border-dark-tertiary",children:(0,m.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,m.jsx)("thead",{className:"text-gray-500 dark:text-gray-400",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"p-4 font-medium",children:"Problem Name"}),(0,m.jsx)("th",{className:"p-4 font-medium",children:"Status"}),(0,m.jsx)("th",{className:"p-4 font-medium",children:"Difficulty"})]})}),(0,m.jsx)("tbody",{children:e.problems.map((t,r)=>(0,m.jsxs)("tr",{className:"border-t border-gray-200 dark:border-dark-tertiary ".concat("blocked"===e.status?"opacity-60":"hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[(0,m.jsxs)("td",{className:"p-4 flex items-center ".concat("blocked"===e.status?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"text-blue-600 dark:text-blue-400 hover:underline cursor-pointer"),onClick:()=>{"blocked"!==e.status&&w("/problem/".concat(v,"/").concat(e.title,"/").concat(t.name))},children:["Completed"===t.status&&(0,m.jsx)(l.CMH,{className:"text-green-500 mr-2"}),t.name,"blocked"===e.status&&(0,m.jsx)("span",{className:"ml-2 text-xs bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 px-2 py-0.5 rounded",children:"Locked"})]}),(0,m.jsx)("td",{className:"p-4",children:(0,m.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Completed"===t.status?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:t.status})}),(0,m.jsx)("td",{className:"p-4 text-green-600 dark:text-green-400",children:t.difficulty})]},r))})]})})]},t))})]}),(0,m.jsx)("div",{className:"space-y-8"})]})})})}}}]);
//# sourceMappingURL=495.c94978a8.chunk.js.map