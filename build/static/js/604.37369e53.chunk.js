"use strict";(self.webpackChunkcoding_platform=self.webpackChunkcoding_platform||[]).push([[604],{2604:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var r=s(9379),a=s(5043),n=s(9586),i=s(5187),o=s(3611),l=s(791),d=s(1129),c=s(3677),m=s(7304),x=s(6040),u=s(458);const g=()=>{const[e,t]=(0,a.useState)(0),s=(0,u.xI)(),r=(0,o.C3)();(0,a.useEffect)(()=>{if(s.currentUser){const e=s.currentUser.uid,a=(0,o.KR)(r,"users/".concat(e,"/activetime/time")),n=(0,o.Zy)(a,e=>{e.exists()&&t(e.val())});return()=>n()}},[s.currentUser]);return{totalTime:e,formatTime:e=>{const t=Math.floor(e/1e3),s=Math.floor(t/3600),r=Math.floor(t%3600/60);return s>0?"".concat(s,"h ").concat(r,"m"):r>0?"".concat(r,"m"):"".concat(t,"s")}}};var h=s(579);m.t1.register(m.PP,m.kc,m.FN,m.No,m.E8,m.hE,m.m_,m.s$);const b=()=>(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),p=()=>(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),y=()=>(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),f=e=>{if(!e)return new Date(NaN);const t=e.replace(/T(\d{2})_(\d{2})_(\d{2})_(\d{3})Z/,"T$1:$2:$3.$4Z"),s=new Date(t);return isNaN(s.getTime())?new Date(NaN):s},j=e=>{switch(e){case"Accepted":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30";case"Wrong Answer":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/30";case"Runtime Error":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/30";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/30"}},v=e=>{const t=f(e);return isNaN(t.getTime())?(console.warn("Invalid date for timestamp:",e),"N/A"):t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},k=e=>{if(!e)return"Unknown";return new Date(e).toLocaleDateString("en-US",{month:"long",year:"numeric"})};const N=function(){var e,t;const{theme:s}=(0,n.D)(),{user:m,logout:u,loading:N}=(0,i.A)(),[w,S]=(0,a.useState)("overview"),[A,D]=(0,a.useState)("dark"===s),[L,C]=(0,a.useState)(null),[M,U]=(0,a.useState)("hourly"),[T,R]=(0,a.useState)(()=>(new Date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),[z,E]=(0,a.useState)({labels:[],data:[]}),{totalTime:P,formatTime:W}=g(),H=(e,t)=>{const s=new Map,r=new Date;if("hourly"===t){for(let e=0;e<24;e++)s.set(e.toString().padStart(2,"0"),0);const[t,r,a]=T.match(/([A-Za-z]+) (\d+), (\d+)/).slice(1);for(const n in e)for(const i in e[n])for(const o in e[n][i])for(const l in e[n][i][o]){if("correct"===e[n][i][o][l].status){const e=new Date(f(l));if(e.getFullYear()===Number(a)&&e.toLocaleString("en-US",{month:"short"})===t&&e.getDate()===Number(r)){const t=e.getHours().toString().padStart(2,"0");s.has(t)&&s.set(t,s.get(t)+1)}}}}else if("weekly"===t){for(let e=6;e>=0;e--){const t=new Date;t.setDate(r.getDate()-e),s.set(t.toLocaleDateString(),0)}for(const t in e)for(const r in e[t])for(const a in e[t][r])for(const n in e[t][r][a]){if("correct"===e[t][r][a][n].status){const e=new Date(f(n)).toLocaleDateString();s.has(e)&&s.set(e,s.get(e)+1)}}}else if("monthly"===t){const t=(()=>{const e=new Date,t=[];for(let s=11;s>=0;s--){const r=new Date;r.setMonth(e.getMonth()-s),t.push(r.toLocaleDateString("en-US",{month:"short",year:"numeric"}))}return t})();t.forEach(e=>s.set(e,0));for(const r in e)for(const t in e[r])for(const a in e[r][t])for(const n in e[r][t][a]){if("correct"===e[r][t][a][n].status){const e=new Date(f(n)).toLocaleDateString("en-US",{month:"short",year:"numeric"});s.has(e)&&s.set(e,s.get(e)+1)}}}return{labels:Array.from(s.keys()),data:Array.from(s.values())}};return(0,a.useEffect)(()=>{m&&(C({username:m.name||"Anonymous",email:m.email||"No email provided",joinDate:k(Date.now()),photoURL:m.photoURL||"https://via.placeholder.com/150",allSubmissions:[],recentSubmissions:[],stats:{totalSubmissions:0,acceptedSubmissions:0,streak:0,rank:"Beginner"}}),(async()=>{if(null===m||void 0===m||!m.uid)return;const e=(0,o.KR)(l.OO),t="userprogress/".concat(m.uid),s="Submissions/".concat(m.uid);try{const[a,n]=await Promise.all([(0,o.Jt)((0,o.jf)(e,t)),(0,o.Jt)((0,o.jf)(e,s))]);let i=0,l=0,d=[];if(a.exists()){const e=a.val();for(const t in e)for(const s in e[t])for(const r in e[t][s]){const a=e[t][s][r];!0===("object"===typeof a?a.accepted:a)&&i++}}if(n.exists()){const e=n.val();l=0;for(const s in e)for(const t in e[s])for(const r in e[s][t])for(const a in e[s][t][r]){const n=e[s][t][r][a];l++,d.push({problem:r,course:s,subcourse:t,language:n.language||"N/A",status:"correct"===n.status?"Accepted":"Wrong Answer",runtime:"-",date:v(a),timestamp:f(a).getTime(),code:n.code})}d.sort((e,t)=>t.timestamp-e.timestamp);const t=H(e,M);E(t)}C(e=>(0,r.A)((0,r.A)({},e),{},{stats:(0,r.A)((0,r.A)({},e.stats),{},{acceptedSubmissions:i,totalSubmissions:l}),allSubmissions:d,recentSubmissions:d.slice(0,10)}))}catch(a){console.error("Error fetching user data:",a)}})())},[m,M,T]),N?(0,h.jsx)(x.A,{}):m?L?(console.log("Profile Data:",L),(0,h.jsx)("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:(0,h.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,h.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,h.jsx)("div",{className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 p-8 mb-8",children:(0,h.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-8",children:[(0,h.jsx)("div",{className:"relative",children:(0,h.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 p-1",children:(0,h.jsx)("img",{src:L.photoURL,alt:"Profile",className:"w-full h-full rounded-full border-4 border-white dark:border-gray-800"})})}),(0,h.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,h.jsx)("div",{className:"flex items-center gap-4",children:(0,h.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:L.username})}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[(0,h.jsx)(p,{}),(0,h.jsxs)("span",{children:["Joined ",L.joinDate]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[(0,h.jsx)(y,{}),(0,h.jsx)("span",{children:L.email})]})]}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:L.bio}),(0,h.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[(0,h.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:L.stats.totalSubmissions}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Total Submissions"})]}),(0,h.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:L.stats.acceptedSubmissions}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Accepted"})]}),(0,h.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:L.stats.rank}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Rank"})]}),(0,h.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:W(P)}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Time Spent"})]})]})]})]})}),(0,h.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 mb-8",children:[(0,h.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,h.jsx)("button",{className:"px-6 py-4 text-sm font-medium transition-all duration-200 ".concat("overview"===w?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"),onClick:()=>S("overview"),children:"Overview"}),(0,h.jsx)("button",{className:"px-6 py-4 text-sm font-medium transition-all duration-200 ".concat("submissions"===w?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"),onClick:()=>S("submissions"),children:"Submissions"})]}),(0,h.jsxs)("div",{className:"p-8",children:["overview"===w&&(0,h.jsx)("div",{className:"space-y-8",children:(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Activity"}),(0,h.jsxs)("div",{className:"flex gap-2",children:["hourly"===M&&(0,h.jsx)("select",{className:"bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-sm",value:T,onChange:e=>R(e.target.value),children:(()=>{const e=new Date,t=e.getFullYear(),s=e.getMonth(),r=e.getDate(),a=[];for(let n=1;n<=r;n++){const e=new Date(t,s,n);a.push(e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))}return a})().map(e=>(0,h.jsx)("option",{value:e,children:e.replace(/, \d{4}$/,"")},e))}),(0,h.jsxs)("select",{className:"bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-sm",value:M,onChange:e=>U(e.target.value),children:[(0,h.jsx)("option",{value:"hourly",children:"Hourly"}),(0,h.jsx)("option",{value:"weekly",children:"Weekly"}),(0,h.jsx)("option",{value:"monthly",children:"Monthly"})]})]})]}),(0,h.jsx)("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-6 h-[300px] flex items-center justify-center",children:0===z.data.length||z.data.every(e=>0===e)?(0,h.jsxs)("div",{className:"text-center w-full",children:[(0,h.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-white/50 dark:bg-gray-800/50 rounded-full flex items-center justify-center",children:(0,h.jsx)(b,{})}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"No submissions"})]}):(0,h.jsx)(c.N1,{data:{labels:z.labels,datasets:[{data:z.data,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4,pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"hourly"===M?"Hours":"weekly"===M?"Date":"Month & Year",font:{size:14}}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:"No. of questions",font:{size:14},color:"#374151"}}},plugins:{legend:{display:!1},title:{display:!1},tooltip:{callbacks:{label:function(e){return"Correct submissions: ".concat(e.parsed.y)}}}}}})})]})}),"submissions"===w&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["All Submissions (",(null===(e=L.allSubmissions)||void 0===e?void 0:e.length)||0,")"]}),(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsxs)("select",{className:"bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-sm backdrop-blur-sm",onChange:e=>{const t=L.allSubmissions.filter(t=>"All Languages"===e.target.value||t.language===e.target.value);C(e=>(0,r.A)((0,r.A)({},e),{},{recentSubmissions:t.slice(0,10)}))},children:[(0,h.jsx)("option",{children:"All Languages"}),(0,h.jsx)("option",{children:"python"}),(0,h.jsx)("option",{children:"javascript"}),(0,h.jsx)("option",{children:"java"}),(0,h.jsx)("option",{children:"cpp"})]}),(0,h.jsxs)("select",{className:"bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-sm backdrop-blur-sm",onChange:e=>{const t=L.allSubmissions.filter(t=>"All Status"===e.target.value||t.status===e.target.value);C(e=>(0,r.A)((0,r.A)({},e),{},{recentSubmissions:t.slice(0,10)}))},children:[(0,h.jsx)("option",{children:"All Status"}),(0,h.jsx)("option",{children:"Accepted"}),(0,h.jsx)("option",{children:"Wrong Answer"})]})]})]}),(0,h.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,h.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,h.jsx)("thead",{className:"bg-gray-50/50 dark:bg-gray-700/50",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Problem"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Course"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Language"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"})]})}),(0,h.jsx)("tbody",{className:"bg-white/30 dark:bg-gray-800/30 divide-y divide-gray-200 dark:divide-gray-700",children:L.recentSubmissions.map((e,t)=>(0,h.jsxs)("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.problem})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.course," / ",e.subcourse]})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.language})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(j(e.status)),children:e.status})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.date||"N/A"})})]},t))})]})}),(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm disabled:opacity-50",disabled:L.recentSubmissions.length<=10,onClick:()=>{const e=L.allSubmissions.findIndex(e=>e.timestamp===L.recentSubmissions[0].timestamp),t=Math.max(0,e-10);C(e=>(0,r.A)((0,r.A)({},e),{},{recentSubmissions:e.allSubmissions.slice(t,t+10)}))},children:"Previous"}),(0,h.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",(null===(t=L.allSubmissions)||void 0===t?void 0:t.length)||0,")"]}),(0,h.jsx)("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm disabled:opacity-50",disabled:0===L.recentSubmissions.length||L.allSubmissions.length<=L.recentSubmissions.length||L.recentSubmissions[L.recentSubmissions.length-1].timestamp===L.allSubmissions[L.allSubmissions.length-1].timestamp,onClick:()=>{const e=L.allSubmissions.findIndex(e=>e.timestamp===L.recentSubmissions[L.recentSubmissions.length-1].timestamp)+1;C(t=>(0,r.A)((0,r.A)({},t),{},{recentSubmissions:t.allSubmissions.slice(e,e+10)}))},children:"Next"})]})]})]})]})]})})})):(0,h.jsx)(x.A,{}):(0,h.jsx)(d.A,{})}}}]);
//# sourceMappingURL=604.37369e53.chunk.js.map